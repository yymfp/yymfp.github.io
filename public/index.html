<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.2" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.2">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.2" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.4.2',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="pjy">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="pjy">
<meta property="article:author" content="pjy">
<meta name="twitter:card" content="summary">






  <link rel="canonical" href="http://yoursite.com/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>pjy</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">pjy</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Startseite</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />Über</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />Tags</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />Kategorien</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archiv</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2024/02/21/WebRtc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pjy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pjy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/02/21/WebRtc/" itemprop="url">
                  WebRtc入门
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Post created: 2024-02-21 18:25:36" itemprop="dateCreated datePublished" datetime="2024-02-21T18:25:36+08:00">2024-02-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Updated at: 2024-03-11 09:59:31" itemprop="dateModified" datetime="2024-03-11T09:59:31+08:00">2024-03-11</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="什么是WebRtc？"><a href="#什么是WebRtc？" class="headerlink" title="什么是WebRtc？"></a>什么是WebRtc？</h2><blockquote>
<p>WebRTC（Web Real-Time Communication）是一种用于在Web浏览器之间实现实时通信的开放标准和技术集合。它允许浏览器和移动应用程序之间直接进行音频、视频和数据传输，而无需借助第三方插件或扩展。WebRTC 提供了一种使开发者能够轻松构建实时通信功能的方式。</p>
</blockquote>
<p><img src="/2024/02/21/WebRtc/webrtcJiagou.png" alt="image"></p>
<h2 id="WebRtc技术关联的浏览器API"><a href="#WebRtc技术关联的浏览器API" class="headerlink" title="WebRtc技术关联的浏览器API"></a>WebRtc技术关联的浏览器API</h2><h3 id="getUserMedia"><a href="#getUserMedia" class="headerlink" title="getUserMedia"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MediaDevices/getUserMedia" target="_blank" rel="noopener"><code>getUserMedia</code></a></h3><blockquote>
<p>这个API允许Web应用程序访问用户的摄像头和麦克风，以便捕获音频和视频数据。（需要注意安全限制：https协议开头的或者是本地localhost这些才能调通）<br>调用成功后会返回<strong><code>MediaStream</code></strong>.<br><strong><code>MediaStream</code></strong>：用于表示媒体数据流。流可以是输入或输出，也可以是本地或远程（例如，本地网络摄像头或远程连接，<code>navigator.mediaDevices.getUserMedia</code><br>）。<br>必须注意，单个 <code>MediaStream</code> 可以包含零个或多个轨道。 每个轨道都有一个对应的 <code>MediaStreamTrack</code> 对象，该对象代表用户代理中的特定媒体源。</p>
</blockquote>
<p><code>MediaStream</code> 中的所有轨道在渲染时进行同步。</p>
<p><code>MediaStreamTrack</code> 表示包含一个或多个通道的内容，其中，通道之间具有定义的已知的关系。 通道是此 API 规范中考虑的最小单位。 下图显示了由单个视频轨道和两个不同的音频（左声道和右声道）轨道组成的 <code>MediaStream</code>。</p>
<p><img src="/2024/02/21/WebRtc/mediaStream.png" alt="image"></p>
<h3 id="RTCPeerConnection"><a href="#RTCPeerConnection" class="headerlink" title="RTCPeerConnection"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/RTCPeerConnection" target="_blank" rel="noopener"><code>RTCPeerConnection</code></a></h3><blockquote>
<p><code>RTCPeerConnection</code> 接口代表一个由本地计算机到远端的 WebRTC 连接。该接口提供了创建，保持，监控，关闭连接的方法的实现。</p>
</blockquote>
<p><img src="/2024/02/21/WebRtc/RTCPeerConnection.png" alt="image"></p>
<h3 id="RTCDataChannel"><a href="#RTCDataChannel" class="headerlink" title="RTCDataChannel"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/RTCDataChannel" target="_blank" rel="noopener"><code>RTCDataChannel</code></a></h3><blockquote>
<p><code>RTCDataChannel</code> 接口代表在两者之间建立了一个双向数据通道的连接。</p>
</blockquote>
<p>因为是浏览器间的直接通信，所以<code>RTCDataChannel</code>要比WebSocket快得多。<br>很多领域都潜在地使用到了这个API，比如：</p>
<ol>
<li>游戏</li>
<li>远程桌面应用</li>
<li>实时文字聊天</li>
<li>文件传输</li>
<li>分散网络</li>
</ol>
<p><img src="/2024/02/21/WebRtc/RTCDataChannel.png" alt="image"></p>
<h2 id="WebRtc连接过程"><a href="#WebRtc连接过程" class="headerlink" title="WebRtc连接过程"></a>WebRtc连接过程</h2><p>要想知道WebRtc的连接过程就需要先知道什么是NAT（Network Address Translation，网络地址转换）。</p>
<h3 id="NAT（Network-Address-Translation，网络地址转换）"><a href="#NAT（Network-Address-Translation，网络地址转换）" class="headerlink" title="NAT（Network Address Translation，网络地址转换）"></a>NAT（Network Address Translation，网络地址转换）</h3><blockquote>
<p>NAT是一种网络通信技术，用于将一个网络的 IP 地址（本地局域网）转换成另一个网络（公网）的 IP 地址。其主要目的是解决 IPv4 地址不足的问题。<br>NAT 技术通过在网络路由器或防火墙上实现地址转换功能，允许多个设备共享一个公共 IP 地址，从而减少了对公共 IP 地址的需求。同时也提高了网络的安全性，因为内部网络的 IP 地址对外部网络是不可见的，从而增加了网络的隐私性和安全性。</p>
</blockquote>
<p><img src="/2024/02/21/WebRtc/NAT.png" alt="image"></p>
<p>了解了什么是NAT，就知道如果两台设备需要通信，肯定是要能够找到各自对应的ip地址以及对应的端口号（WebRtc也不例外）。这就涉及到了NAT穿透的一些知识。</p>
<p><strong>常见的网络拓扑图</strong><br><img src="/2024/02/21/WebRtc/network.png" alt="image"></p>
<h3 id="STUN-协议"><a href="#STUN-协议" class="headerlink" title="STUN 协议"></a>STUN 协议</h3><blockquote>
<p>STUN（Session Traversal Utilities for NAT，NAT会话穿越应用程序）是一种网络协议，用于解决网络通信中的NAT穿越问题。<br>STUN服务器位于公网上，可以帮助客户端发现自己的公网IP地址。客户端通过向STUN服务器发送请求，服务器会返回客户端的公网IP地址和端口号。</p>
</blockquote>
<p><img src="/2024/02/21/WebRtc/stun.png" alt="image"></p>
<h3 id="TURN协议"><a href="#TURN协议" class="headerlink" title="TURN协议"></a>TURN协议</h3><blockquote>
<p>如果STUN无法穿透NAT，可以考虑使用TURN（Traversal Using Relays around NAT）服务器。TURN服务器可以帮助在无法直接连接的情况下，通过中继服务器进行通信。TURN服务器会接收来自客户端的数据，然后转发给对方，从而实现间接通信。</p>
</blockquote>
<p><img src="/2024/02/21/WebRtc/turn.png" alt="image"></p>
<h3 id="NAT类型"><a href="#NAT类型" class="headerlink" title="NAT类型"></a>NAT类型</h3><h4 id="完全锥型NAT"><a href="#完全锥型NAT" class="headerlink" title="完全锥型NAT"></a>完全锥型NAT</h4><blockquote>
<p>完全锥型 NAT 的特点: 一旦打洞成功，所有知道该洞的主机都可以 通过它与内网主机进行通信。</p>
</blockquote>
<p><img src="/2024/02/21/WebRtc/Full%1DConeNAT.png" alt="image"></p>
<p>当host主机通过NAT访问外网主机B时，就会在NAT 上打个洞。如果主机B将该洞的信息分享给主机A和C，那么知道这个洞 的主机A和C都可以通过该洞给内网的host主机发送信息。<br>这里所谓的“洞”就是在NAT上建立了一个内外网的映射 表。你可以将这个映射表简单地理解为一个4元组，包括内网IP、内网 端口、映射的外网IP以及映射的外网端口。</p>
<h4 id="IP限制锥型NAT"><a href="#IP限制锥型NAT" class="headerlink" title="IP限制锥型NAT"></a>IP限制锥型NAT</h4><blockquote>
<p>IP 限制锥型 NAT 的特点: 一旦打洞成功，只有与之打洞成功的外网主机才能通过该洞 与内网主机通信，而其他外网主机即使知道洞口也不能与之通信。 </p>
</blockquote>
<p><img src="/2024/02/21/WebRtc/IPNat.png" alt="image"></p>
<p>IP限制锥型NAT要比完全锥型NAT严格得多。IP限制锥型NAT的主 要特点:NAT打洞成功后，只有与之打洞成功的外网主机才能通过该洞 与内网主机通信，而其他外网主机即使知道洞口也不能与之通信。<br>host主机访问主机B时，在NAT上打了一个洞。此 时，只有主机B才能通过该洞向内网host主机发送信息，而其他外网主 机(如A与C)不能再像完全锥型NAT一样通过该洞与内网host主机通信 了。但需要注意的是，主机B上不同的端口(如p1、p2等)是可以向 host主机发送消息的。</p>
<h4 id="端口限制NAT"><a href="#端口限制NAT" class="headerlink" title="端口限制NAT"></a>端口限制NAT</h4><blockquote>
<p>端口限制锥型 NAT 的特点: 一旦打洞成功，除了像IP限制锥型 NAT 一样需要对IP地址进行检测外，还需要对端口进行检测 。</p>
</blockquote>
<p><img src="/2024/02/21/WebRtc/portNat.png" alt="image"></p>
<p>host主机访问主机B时在NAT上打了一个洞，此时外 网主机A和C是访问不了内网host主机的，这与IP限制锥型NAT是一样 的。此外，如果host主机访问的是主机B的p1端口，那么只有主机B的p1 端口发送的消息才能穿越NAT，而主机B的p2端口已无法再通过NAT 了。</p>
<h4 id="对称型NAT"><a href="#对称型NAT" class="headerlink" title="对称型NAT"></a>对称型NAT</h4><blockquote>
<p>对称型 NAT 的特点: 内网主机每次访问不同的IP或端口时，都会生成一个新洞，而不像前面3种NAT类型使用的是同一个洞。 </p>
</blockquote>
<p><img src="/2024/02/21/WebRtc/SymmetricNat.png" alt="image"></p>
<p>在对称型NAT中，host主机访问主机B时在NAT上打 了一个洞，此时只有主机B上相应端口发送的数据才能穿越该洞，这一 点与端口限制型NAT是一致的。它与端口限制型NAT最大的不同是当 host主机访问外网主机A时，它与主机A之间会新建一个洞，而不是复用 访问主机B时的洞。</p>
<h4 id="打洞举例"><a href="#打洞举例" class="headerlink" title="打洞举例"></a>打洞举例</h4><p><strong>A B均为完全锥型NAT</strong><br><img src="/2024/02/21/WebRtc/ABFullNat.png" alt="image"></p>
<ol>
<li>A 向 server 发起与 B 的打洞请求，server 向 B 转发打洞请求，同时A向 PB1 直接发送探测包，那么 A 为 B 在 PA1 已经成功打洞，但是 A 的消息无法到达，因为 B 的 NAT 会将不明的地址(PA1) 丢弃/拒绝。</li>
<li>B 收到从 server 转发过来的打洞请求后，向 PA1 直接发送探测包，这时 B 的 NAT 可以放行 PA1 的消息了，也就是 B 为 A 在 PB1 上完成了打洞。</li>
<li>至此，A 和 B 消息能够互通，打洞成功</li>
</ol>
<p><strong>A为对称型 B为端口限制型</strong><br><img src="/2024/02/21/WebRtc/ASBPNat.png" alt="image"></p>
<p>由于 B 收到 server 转发过来的打洞请求后，是向 PA1 发送探测包的，因为 B 只知道 PA1（PA1 是 A 与 server 连接是映射的端口号，server 也只知道 PA1)，但是 A 由于是对称型 NAT，所以会拒绝B往PA1发的消息，同时会从一个新端口 PA2 向 B 发包，但是 B 由于是端口限制型，只允许 PA1 端口的包通过，所以 B 会拒绝 PA2。</p>
<p><strong>A为对称型 B为IP限制型</strong><br><img src="/2024/02/21/WebRtc/NAT%E7%A9%BF%E9%80%8F%E6%B5%81%E7%A8%8B%E4%B8%BE%E4%BE%8B.png" alt="image"></p>
<h4 id="各NAT类型打洞可行性"><a href="#各NAT类型打洞可行性" class="headerlink" title="各NAT类型打洞可行性"></a>各NAT类型打洞可行性</h4><p><img src="/2024/02/21/WebRtc/NATOpen.png" alt="image"></p>
<h3 id="ICE"><a href="#ICE" class="headerlink" title="ICE"></a>ICE</h3><blockquote>
<p>ICE（Interactive Connectivity Establishment）候选项（ICE candidates）是一组网络地址（包括IP地址和端口号），用于建立对等连接（peer-to-peer connections）的过程中。ICE候选项由WebRTC框架自动收集和处理，用于解决网络中存在的NAT（Network Address Translation）和防火墙问题，以便在不同的网络环境中实现点对点通信。</p>
</blockquote>
<p><img src="/2024/02/21/WebRtc/ICE.png" alt="image"></p>
<p>WebRtc将Candidate分为四种类型：host、srflx、prflx及 relay，且它们还有优先级次序，其中host优先级最高，relay优先级最低。比如WebRTC收集到了两个Candidate，一个是host类型，另一个是 srflx类型，那么WebRTC一定会先尝试与host类型的Candidate建立连 接，如果不成功，才会使用srflx类型的Candidate。 </p>
<h4 id="ICE候选交换过程"><a href="#ICE候选交换过程" class="headerlink" title="ICE候选交换过程"></a>ICE候选交换过程</h4><p><img src="/2024/02/21/WebRtc/ICESend.png" alt="image"></p>
<h3 id="信令交互过程（sdp-主要用来协商媒体格式）"><a href="#信令交互过程（sdp-主要用来协商媒体格式）" class="headerlink" title="信令交互过程（sdp 主要用来协商媒体格式）"></a>信令交互过程（sdp 主要用来协商媒体格式）</h3><p><img src="/2024/02/21/WebRtc/sdp.png" alt="image"></p>
<h3 id="WebRtc连接核心过程"><a href="#WebRtc连接核心过程" class="headerlink" title="WebRtc连接核心过程"></a>WebRtc连接核心过程</h3><ol>
<li>创建 p2p 通道端 A，添加本地视频流至通道，并且本地预览</li>
<li>创建 p2p 通道端 B，添加本地视频流至通道，并且本地预览</li>
<li>offer、answer 交换</li>
<li>addIceCandidate 候选地址</li>
<li>通道 A、B 连接建立成功，获取对端视频流，播放</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2024/02/19/HTTP-Live-Streaming-HLS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pjy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pjy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/02/19/HTTP-Live-Streaming-HLS/" itemprop="url">
                  HTTP Live Streaming (HLS)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Post created: 2024-02-19 18:41:04 / Updated at: 18:47:34" itemprop="dateCreated datePublished" datetime="2024-02-19T18:41:04+08:00">2024-02-19</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><blockquote>
<p>HLS（HTTP Live Streaming）是由Apple公司定义的用于实时流传输的协议，HLS基于HTTP协议实现，传输内容包括两部分。一是M3U8播放列表，二是TS媒体文件（H.265对应的是FMP4格式的文件）。</p>
</blockquote>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ul>
<li>基于HTTP协议进行传输，兼容性好</li>
<li>单个片段包含完整的音视频数据以及字幕信息等，不存在音视频同步问题</li>
<li>自适应流：可根据网络情况和设备性能动态调整视频质量和比特率</li>
<li>支持加解密传输</li>
<li>支持中间插入广告</li>
<li>播放延迟较大</li>
</ul>
<h2 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h2><ul>
<li>视频直播：HLS是一种流媒体协议，可以实现实时或准实时的视频播放，因此在各种直播平台（如Twitch，YouTube Live等）中都有应用。</li>
<li>点播服务：除了直播，HLS也可以用于点播服务，用户可以随时选择观看的内容。</li>
<li>在线教育：在线教育平台可以使用HLS提供实时的课程直播，或者录制好的课程视频。</li>
<li>网络电视：一些网络电视服务商也使用HLS技术，提供电视节目的在线播放。</li>
</ul>
<h2 id="核心原理"><a href="#核心原理" class="headerlink" title="核心原理"></a>核心原理</h2><p>通过将整条流切割成一个小的可以通过HTTP下载的媒体文件（TS片段），然后提供一个配套的媒体列表文件（m3u8）提供给客户端，客户端按照列表顺序去拉取这些媒体文件进行播放，视觉上就是在播放一整段流的效果。由于传输层协议用的标准的HTTP协议，HLS可以方便的透过防火墙或者代理服务器以及利用CDN进行分发加速。</p>
<p><img src="/2024/02/19/HTTP-Live-Streaming-HLS/4B0A0C9B610A4573BCA9DCD0DF2DFCB7.png" alt="image"></p>
<h2 id="M3U8索引文件"><a href="#M3U8索引文件" class="headerlink" title="M3U8索引文件"></a>M3U8索引文件</h2><p>M3U8文件实质是一个播放列表，其可能是一个媒体播放列表（Media PlayList），或者是一个主列表（Master Playlist）。</p>
<ul>
<li><p>媒体播放列表：这种类型的M3U8文件包含了一系列的媒体段（通常是TS或fMP4文件）的URL链接，这些媒体段按照在播放列表中的顺序进行播放。对于点播来说，客户端只需要按照顺序下载片段资源，依次播放即可。而对于直播来说，客户端需要定时重新请求该m3u8文件，拉取最新的片段数据。</p>
<pre><code>#EXTM3U // 表明该文件是一个 m3u8 文件，必须在文件的第一行
#EXT-X-VERSION:3 //  HLS 的协议版本号
#EXT-X-TARGETDURATION:10 // 该标签指定了媒体文件持续时间的最大值,，播放文件列表中的媒体文件在EXTINF标签中定义的持续时间必须小于或者等于该标签指定的持续时间。该标签在播放列表文件中必须出现一次。
#EXTINF:10,
http://example.com/1.ts
#EXTINF:10,
http://example.com/2.ts
#EXTINF:10,
http://example.com/3.ts
#EXT-X-ENDLIST
</code></pre></li>
<li><p>主播放列表：这种类型的M3U8文件并不直接包含媒体内容，而是包含了一系列的媒体播放列表的URL链接。每一个媒体播放列表都代表了同一份媒体内容的不同版本，例如不同的分辨率、不同的码率等。客户端可以根据自身的网络状况和设备性能，从主播放列表中选择最合适的媒体播放列表进行播放。</p>
<pre><code>#EXTM3U // 表明该文件是一个 m3u8 文件，必须在文件的第一行
#EXT-X-VERSION:3   //  HLS 的协议版本号
#EXT-X-STREAM-INF:BANDWIDTH=1280000,RESOLUTION=720x480
http://example.com/low.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=2560000,RESOLUTION=1280x720
http://example.com/mid.m3u8
#EXT-X-STREAM-INF:BANDWIDTH=7680000,RESOLUTION=1920x1080
http://example.com/high.m3u8
</code></pre></li>
</ul>
<h2 id="TS文件"><a href="#TS文件" class="headerlink" title="TS文件"></a>TS文件</h2><p>TS（Transport Stream）是一种音视频封装格式，全称MPEG2-TS。MPEG-TS主要应用于实时传送的节目，比如实时广播的电视节目。</p>
<p>TS文件（流）可以分为三层：<strong>TS层（Transport Stream）、PES层（Packet Elemental Stream）、ES层（Elementary Stream）</strong>。</p>
<ul>
<li>ES层就是音视频数据</li>
<li>PES层是在音视频数据上加了时间戳等对数据帧的说明信息</li>
<li>TS层是在PES层上加入了数据流识别和传输的必要信息。TS文件（码流）由多个TS Packet组成的。</li>
</ul>
<h2 id="加解密"><a href="#加解密" class="headerlink" title="加解密"></a>加解密</h2><p>HLS协议支持对媒体内容进行AES-128或SAMPLE-AES加密，以保护媒体内容的安全。</p>
<ol>
<li>加密流程：</li>
</ol>
<ul>
<li>服务端首先生成一个随机的AES密钥。</li>
<li>使用这个AES密钥对媒体内容进行AES-128或SAMPLE-AES加密，生成加密后的媒体段。</li>
<li>将AES密钥加密后存储在服务端，同时生成一个可以用于获取AES密钥的URL链接。</li>
<li>在M3U8播放列表中，对于每一个加密的媒体段，都会添加一个EXT-X-KEY标签，该标签包含了获取AES密钥的URL链接和加密方法。</li>
</ul>
<ol start="2">
<li>解密流程：</li>
</ol>
<ul>
<li>客户端在解析M3U8播放列表时，发现EXT-X-KEY标签，就知道媒体段是加密的。</li>
<li>客户端通过EXT-X-KEY标签中的URL链接向服务端请求AES密钥。</li>
<li>服务端验证客户端的请求后，返回加密的AES密钥。</li>
<li>客户端解密AES密钥，然后使用AES密钥对媒体段进行解密，得到原始的媒体内容。</li>
</ul>
<h2 id="web端如何使用HLS播放云存储视频"><a href="#web端如何使用HLS播放云存储视频" class="headerlink" title="web端如何使用HLS播放云存储视频"></a>web端如何使用HLS播放云存储视频</h2><p><img src="/2024/02/19/HTTP-Live-Streaming-HLS/WEBRESOURCE7db8da1ac6ab759c2364a5e7cacd4f68.png" alt="image"></p>
<pre class="line-numbers language-typescript"><code class="language-typescript"><span class="token keyword">const</span> HlsVideo<span class="token punctuation">:</span> React<span class="token punctuation">.</span>FC<span class="token operator">&lt;</span>IHlsVideoProps<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  debug <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">,</span>
  keyPreset <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
  enableWorker <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">,</span>
  url <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
  hlsRef<span class="token punctuation">,</span>
  videoRef<span class="token punctuation">,</span>
  videoProps <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> defaultVideoProps <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useMemo</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      disablePictureInPicture<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>
      autoPlay<span class="token punctuation">:</span> <span class="token keyword">true</span><span class="token punctuation">,</span>
      controls<span class="token punctuation">:</span> <span class="token keyword">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> _videoProps <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>defaultVideoProps<span class="token punctuation">,</span> <span class="token operator">...</span>videoProps <span class="token punctuation">}</span><span class="token punctuation">;</span>

  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> hls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hls</span><span class="token punctuation">(</span><span class="token function">config</span><span class="token punctuation">(</span>debug<span class="token punctuation">,</span> keyPreset<span class="token punctuation">,</span> enableWorker<span class="token punctuation">)</span> as <span class="token keyword">any</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hlsRef<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      hlsRef<span class="token punctuation">.</span>current <span class="token operator">=</span> hls<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> video <span class="token operator">=</span> videoRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hls <span class="token operator">&amp;&amp;</span> video <span class="token operator">&amp;&amp;</span> url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      hls<span class="token punctuation">.</span><span class="token function">loadSource</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 加载m3u8</span>
      hls<span class="token punctuation">.</span><span class="token function">attachMedia</span><span class="token punctuation">(</span>video<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 绑定videoElement和hls实例</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> hls<span class="token punctuation">.</span><span class="token function">detachMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>url<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>video
      style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> height<span class="token punctuation">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token string">"100%"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
      ref<span class="token operator">=</span><span class="token punctuation">{</span>videoRef<span class="token punctuation">}</span>
      <span class="token punctuation">{</span><span class="token operator">...</span>_videoProps<span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// @ts-nocheck</span>
<span class="token keyword">import</span> Hls <span class="token keyword">from</span> <span class="token string">"hls.js"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> KEY_URL <span class="token operator">=</span> <span class="token string">"/api/jarvis/hls/key"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 前端网关配置的用于获取密钥的链接（业务鉴权之类的）</span>
<span class="token keyword">const</span> ORIGIN_KEY_URL <span class="token operator">=</span> <span class="token string">"/api/cloud/key"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// m3u8返回的通用的用于获取密钥的链接</span>

<span class="token keyword">function</span> <span class="token function">ab2str</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> String<span class="token punctuation">.</span>fromCharCode<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">_base64ToArrayBuffer</span><span class="token punctuation">(</span>base64<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// base64 解码</span>
  <span class="token keyword">const</span> binaryString <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">atob</span><span class="token punctuation">(</span>base64<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> len <span class="token operator">=</span> binaryString<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">const</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    bytes<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> binaryString<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment" spellcheck="true">// 二进制数组</span>
  <span class="token keyword">return</span> bytes<span class="token punctuation">.</span>buffer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> configure <span class="token operator">=</span> <span class="token punctuation">(</span>debug<span class="token punctuation">:</span> <span class="token keyword">boolean</span><span class="token punctuation">,</span> keyPreset<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> enableWorker<span class="token punctuation">:</span> <span class="token keyword">boolean</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  debug<span class="token punctuation">,</span>
  enableWorker<span class="token punctuation">,</span>
  <span class="token comment" spellcheck="true">// defaultAudioCodec: 'mp4a.40.2',</span>
  <span class="token comment" spellcheck="true">// enableWorker: false,</span>
  <span class="token comment" spellcheck="true">// maxAudioFramesDrift: 23,</span>
  loader<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> loader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Hls<span class="token punctuation">.</span>DefaultConfig<span class="token punctuation">.</span>loader</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

    Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      stats<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> loader<span class="token punctuation">.</span>stats<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      context<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> loader<span class="token punctuation">.</span>context<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>abort <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> loader<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>destroy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> loader<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>load <span class="token operator">=</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> config<span class="token punctuation">,</span> callbacks<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span> <span class="token operator">=</span> context<span class="token punctuation">;</span>
      <span class="token keyword">const</span> onSuccess <span class="token operator">=</span> callbacks<span class="token punctuation">.</span>onSuccess<span class="token punctuation">;</span>
      callbacks<span class="token punctuation">.</span>onSuccess <span class="token operator">=</span> <span class="token punctuation">(</span>response<span class="token punctuation">,</span> stats<span class="token punctuation">,</span> context1<span class="token punctuation">,</span> networkDetails<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">!==</span> <span class="token string">"manifest"</span> <span class="token operator">&amp;&amp;</span> context1<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">"key?devId"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment" spellcheck="true">// 针对密钥进行base64解密处理</span>
          <span class="token keyword">const</span> key <span class="token operator">=</span> keyPreset <span class="token operator">||</span> JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token function">ab2str</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>result<span class="token punctuation">.</span>key<span class="token punctuation">;</span>
          response<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token function">_base64ToArrayBuffer</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">onSuccess</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> stats<span class="token punctuation">,</span> context<span class="token punctuation">,</span> networkDetails<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> config<span class="token punctuation">,</span> callbacks<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  xhrSetup<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">:</span> XMLHttpRequest<span class="token punctuation">,</span> url<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 自定义xhr，替换密钥链接</span>
    <span class="token keyword">const</span> u <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>ORIGIN_KEY_URL<span class="token punctuation">)</span>
      <span class="token operator">?</span> KEY_URL <span class="token operator">+</span> <span class="token string">"?"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>url as <span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"?"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
      <span class="token punctuation">:</span> url<span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> configure<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="HLS直播延迟原因"><a href="#HLS直播延迟原因" class="headerlink" title="HLS直播延迟原因"></a>HLS直播延迟原因</h2><ol>
<li>存在安全缓冲时长，客户端应该从M3U8文件中倒数第三个分片开始播放</li>
<li>服务器更新M3U8文件的间隔，理论上服务器需要大于等于一个EXT-X-TARGETDURATION的时长去更新M3u8文件</li>
<li>CDN缓存机制。若当前源站 M3U8 已经更新到了第四个片段，但是CDN边缘节点还缓存着上一个版本的 M3U8文件（只包含3个片段）。此时就需要等文件的TTL过期，边缘节点才会去获取最新版本的 M3U8 文件。而这个缓存TTL也不能取消，如果每个端上的请求到达CDN边缘节点时都去找源站要最新版本，源站就可能会被流量冲垮。</li>
<li>服务器处理时间：服务器接收到媒体源数据后，进行切片编码之后再进行传输。</li>
<li>网络延迟：文件从服务器到客户端中间的网络传输延迟。</li>
</ol>
<h2 id="优化延迟方法"><a href="#优化延迟方法" class="headerlink" title="优化延迟方法"></a>优化延迟方法</h2><ol>
<li>减少客户端安全缓冲时长</li>
<li>减少服务器更新M3U8文件的间隔</li>
<li>减小分片长度</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2024/02/19/I%E5%B8%A7%E3%80%81P%E5%B8%A7%E3%80%81B%E5%B8%A7%E3%80%81GOP%E3%80%81IDR-%E5%92%8CPTS-DTS%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pjy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pjy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/02/19/I%E5%B8%A7%E3%80%81P%E5%B8%A7%E3%80%81B%E5%B8%A7%E3%80%81GOP%E3%80%81IDR-%E5%92%8CPTS-DTS%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/" itemprop="url">
                  I帧、P帧、B帧、GOP、IDR 和PTS, DTS之间的关系
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Post created: 2024-02-19 18:29:15 / Updated at: 18:41:54" itemprop="dateCreated datePublished" datetime="2024-02-19T18:29:15+08:00">2024-02-19</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-视频传输原理"><a href="#1-视频传输原理" class="headerlink" title="1. 视频传输原理"></a>1. 视频传输原理</h3><p>视频是利用人眼视觉暂留的原理，通过播放一系列的图片，使人眼产生运动的感觉。单纯传输视频画面，视频量非常大，对现有的网络和存储来说是不可接受的。为了能够使视频便于传输和存储，人们发现视频有大量重复的信息，如果将重复信息在发送端去掉，在接收端恢复出来，这样就大大减少了视频数据的文件，因此就有了H.264、H.265、VP8、VP9等视频压缩标准。</p>
<h3 id="2-视频播放器原理"><a href="#2-视频播放器原理" class="headerlink" title="2. 视频播放器原理"></a>2. 视频播放器原理</h3><p>视频播放器播放一个互联网上的视频文件，需要经过以及几个步骤：解协议、解封装、解码音视频以及音视频同步。完整过程如下图所示：<br><img src="/2024/02/19/I%E5%B8%A7%E3%80%81P%E5%B8%A7%E3%80%81B%E5%B8%A7%E3%80%81GOP%E3%80%81IDR-%E5%92%8CPTS-DTS%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/2428C12B709F42D38859BA4234F61E5D.png" alt="image"></p>
<p><strong>解协议</strong>：作用就是将流媒体协议的数据解析为标准的相应的封装格式数据（HTTP/RTMP等）</p>
<p><strong>解封装</strong>：作用就是将输入的封装格式的数据分离成为视频流压缩编码数据和音频流压缩编码数据。（MP4/TS等）</p>
<p><strong>解码</strong>：作用就是将音视频压缩编码数据解码成为非压缩的音视频原始数据。</p>
<ul>
<li><p>音频：MP3/AAC –&gt; PCM </p>
</li>
<li><p>视频：H.264/VP8 —&gt; YUV/RGB</p>
</li>
</ul>
<p><strong>音视频同步</strong>：根据解封装模块处理过程中获取到的参数信息，同步解码出来的音频和视频数据，并将音视频数据送到显卡和声卡中播放。</p>
<h3 id="3-帧内预测和帧间预测"><a href="#3-帧内预测和帧间预测" class="headerlink" title="3. 帧内预测和帧间预测"></a>3. 帧内预测和帧间预测</h3><p>以下方图片为例。图片显示了两个视频帧（彼此相邻），有一个黑色像素的矩形块在其中移动。在第一帧中，该块位于图像左侧，而第二帧中它移动到了右侧。如何压缩帧2图像数据呢？</p>
<p><img src="/2024/02/19/I%E5%B8%A7%E3%80%81P%E5%B8%A7%E3%80%81B%E5%B8%A7%E3%80%81GOP%E3%80%81IDR-%E5%92%8CPTS-DTS%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/504B85A8EA314E70BC3BB9C865A14FB4.png" alt="image"><br>大致步骤：</p>
<ul>
<li><p>将视频分解成为多个像素块（宏块），并逐一压缩。</p>
</li>
<li><p>为了压缩每个宏块，首先在当前帧（<strong>帧内预测</strong>）和前后帧（<strong>帧间预测</strong>）中搜索，找到与我们想要压缩的宏块相似的宏块。</p>
</li>
<li><p>记录最佳匹配的宏块的位置（位于哪一帧以及在该帧中的位置）。然后，两个宏块之间的差异被压缩，并和位置信息一起被发送给解码器。</p>
</li>
</ul>
<h3 id="4-I帧"><a href="#4-I帧" class="headerlink" title="4. I帧"></a>4. I帧</h3><p>I帧：即Intra-coded picture（帧内编码图像帧），I帧表示关键帧，可以理解为这一帧画面的完整保留；解码时只需要本帧数据就可以完成（因为包含完整画面）。也就是说I帧只会进行<strong>帧内预测</strong>，匹配相似的宏块进行压缩。</p>
<p><strong>I帧的特点</strong>：</p>
<ol>
<li>它是一个全帧压缩编码帧。它将全帧图像信息进行JPEG压缩编码及传输；</li>
<li>解码时仅用I帧的数据就可重构完整图像； </li>
<li>I帧描述了图像背景和运动主体的详情；</li>
<li>I帧是P帧和B帧的参考帧（其质量直接影响到同组内以后各帧的质量）；</li>
<li>I帧是帧组GOP的基础帧（第一帧），在一组中只有一个I帧；</li>
<li>I帧所占数据的信息量比较大；</li>
</ol>
<h3 id="5-P帧"><a href="#5-P帧" class="headerlink" title="5. P帧"></a>5. P帧</h3><p>P帧：即Predictive-coded Picture（<strong>前向预测编码图像帧</strong>）。P帧表示的是这一帧跟之前的一个关键帧（或P帧）的差别，解码时需要用之前缓存的画面叠加上本帧定义的差别，生成最终画面。（也就是差别帧，P帧没有完整画面数据，只有与前一帧的画面差别的数据）</p>
<p><img src="/2024/02/19/I%E5%B8%A7%E3%80%81P%E5%B8%A7%E3%80%81B%E5%B8%A7%E3%80%81GOP%E3%80%81IDR-%E5%92%8CPTS-DTS%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/9DED6512254D4CF0A117E6B1AE5EE402.png" alt="image"></p>
<p><strong>P帧的预测与重构</strong>：P帧是以前面I/P帧为参考帧，在前面的I/P帧中找出P帧“某点”的预测值和运动矢量，取预测差值和运动矢量一起传送。在接收端根据运动矢量从I/P帧中找出P帧“某点”的预测值并与差值相加以得到P帧“某点”样值,从而可得到完整的P帧。</p>
<p><strong>P帧特点</strong>：</p>
<ol>
<li>P帧采用运动补偿的方法传送它与前面的I或P帧的差值及运动矢量(预测误差);</li>
<li>解码时必须将I帧中的预测值与预测误差求和后才能重构完整的P帧图像;</li>
<li>P帧属于前向预测的帧间预测。它只参考前面最靠近它的I帧或P帧;</li>
<li>P帧可以是其后面P帧的参考帧,也可以是其前后的B帧的参考帧;</li>
<li>由于P帧是参考帧,它可能造成解码错误的扩散;</li>
<li>由于是差值传送,P帧的压缩比较高。</li>
</ol>
<h3 id="6-B帧"><a href="#6-B帧" class="headerlink" title="6. B帧"></a>6. B帧</h3><p>B帧：即Bidirectionally predicted picture（<strong>双向预测编码图像帧</strong>)。B帧是双向差别帧，也就是B帧记录的是本帧与前后帧的差别，换言之，要解码B帧，不仅要取得之前的缓存画面，还要解码之后的画面，通过前后画面的与本帧数据的叠加取得最终的画面。B帧压缩率高，但是解码时比较耗CPU。</p>
<p><img src="/2024/02/19/I%E5%B8%A7%E3%80%81P%E5%B8%A7%E3%80%81B%E5%B8%A7%E3%80%81GOP%E3%80%81IDR-%E5%92%8CPTS-DTS%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/5DDB5B88A2924C6A840C41533AE0920D.png" alt="image"></p>
<p><strong>B帧的预测与重构</strong>：B帧以前面的I或P帧和后面的P帧为参考帧,“找出”B帧“某点”的预测值和两个运动矢量,并取预测差值和运动矢量传送。接收端根据运动矢量在两个参考帧中“找出(算出)”预测值并与差值求和,得到B帧“某点”样值,从而可得到完整的B帧。采用运动预测的方式进行帧间双向预测编码。</p>
<p><strong>B帧的特点</strong>：</p>
<ol>
<li>B帧是由前面的I或P帧和后面的P帧来进行预测的;</li>
<li>B帧传送的是它与前面的I帧或P帧和后面的P帧之间的预测误差及运动矢量;</li>
<li>B帧是双向预测编码帧;</li>
<li>B帧压缩比最高,因为它只反映参考帧间运动主体的变化情况,预测比较准确;</li>
<li>B帧不是参考帧,不会造成解码错误的扩散</li>
</ol>
<h3 id="7-GOP（序列）和IDR"><a href="#7-GOP（序列）和IDR" class="headerlink" title="7. GOP（序列）和IDR"></a>7. GOP（序列）和IDR</h3><p><strong>序列</strong>：一个序列就是一段内容差异不太大的图像编码后生成的一串数据流。当运动变化比较少时，一个序列可以很长，因为运动变化少就代表图像画面的内容变动很小，所以就可以编一个I帧，然后一直P帧、B帧了。当运动变化多时，可能一个序列就比较短了，比如就包含一个I帧和3、4个P帧。</p>
<p><strong>IDR</strong>：即立即刷新图像，是一个序列的第一个图像，IDR图像都是I帧图像。引入 IDR 图像是为了解码的重同步，当解码器解码到 IDR 图像时，立即将参考帧队列清空，将已解码的数据全部输出或抛弃，重新查找参数集，开始一个新的序列。这样，如果前一个序列出现重大错误，在这里可以获得重新同步的机会。IDR图像之后的图像永远不会使用IDR之前的图像的数据来解码。</p>
<p><strong>GOP</strong>：即Group of picture（<strong>图像组</strong>），指两个I帧之间的距离，两个I帧之间形成一组图片，就是GOP。</p>
<p><img src="/2024/02/19/I%E5%B8%A7%E3%80%81P%E5%B8%A7%E3%80%81B%E5%B8%A7%E3%80%81GOP%E3%80%81IDR-%E5%92%8CPTS-DTS%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/8AC59C17C15A4885A126F0B3B824E20B.png" alt="image"></p>
<h3 id="为什么需要B帧："><a href="#为什么需要B帧：" class="headerlink" title="为什么需要B帧："></a>为什么需要B帧：</h3><p>想要理解B帧的作用，我们需要先理解呈现顺序和编解码顺序的概念。<br>以I帧和P帧为例。如果你只使用了这两种类型的帧，那么每一帧要么参考自身（I帧），要么参考前一帧（P帧）。因此，帧可以以相同的顺序进出编码器。这里，呈现顺序（或显示顺序）与编码、解码顺序相同。</p>
<p><img src="/2024/02/19/I%E5%B8%A7%E3%80%81P%E5%B8%A7%E3%80%81B%E5%B8%A7%E3%80%81GOP%E3%80%81IDR-%E5%92%8CPTS-DTS%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/D7B775D11EB743F094F9802ACDF78DBA.png" alt="image"></p>
<p>网络上的电影很多都采用了B帧，因为B帧记录的是前后帧的差别，比P帧能节约更多的空间，但这样一来，文件小了，解码器就麻烦了，因为在解码时，不仅要用之前缓存的画面，还要知道下一个I或者P的画面（也就是说要预读预解码），而且，B帧不能简单地丢掉，因为B帧其实也包含了画面信息，如果简单丢掉，并用之前的画面简单重复，就会造成画面卡（其实就是丢帧了），并且由于网络上的电影为了节约空间，往往使用相当多的B帧，B帧用的多，对不支持B帧的播放器就造成更大的困扰，画面也就越卡。</p>
<p><strong>下图编解码顺序：IPBBPBB…I</strong></p>
<p><strong>呈现顺序：IBBPBBP…I</strong></p>
<p><img src="/2024/02/19/I%E5%B8%A7%E3%80%81P%E5%B8%A7%E3%80%81B%E5%B8%A7%E3%80%81GOP%E3%80%81IDR-%E5%92%8CPTS-DTS%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/B670A19A85B547999C298B6BA314E0F1.png" alt="image"></p>
<h3 id="8-PTS和DTS"><a href="#8-PTS和DTS" class="headerlink" title="8. PTS和DTS"></a>8. PTS和DTS</h3><p>为什么会有PTS和DTS的概念</p>
<p>通过上面的解释可以看出：P帧需要参考前面的I帧或P帧才可以生成一张完整的图片，而B帧则需要参考前面的I帧或P帧以及后面的P帧才可以生成一张完整的图片。这样一来就有一个问题：在视频流中，先到来的B帧无法理解解码，需要等待它依赖的后面的P帧先解码完成才行，这样一来播放时间与解码时间就不一致了，所以需要针对这种顺序进行重新排序，这时就引入了另外的两个概念：DTS和PTS。</p>
<p><strong>DTS（Decoding Time Stamp）</strong>：即<strong>解码时间戳</strong>，这个时间戳的意义在于告诉播放器该在什么时候解码这一帧的数据。</p>
<p><strong>PTS（Presentation Time Stamp）</strong>：即<strong>显示时间戳</strong>，这个时间戳用来告诉播放器该在什么时候显示这一帧的数据。</p>
<p><img src="/2024/02/19/I%E5%B8%A7%E3%80%81P%E5%B8%A7%E3%80%81B%E5%B8%A7%E3%80%81GOP%E3%80%81IDR-%E5%92%8CPTS-DTS%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/CBED4F4AC4EC45B78044E27BA0CB6A8B.png" alt="image"></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pjy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pjy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" itemprop="url">
                  WebRtc Internals工具使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Post created: 2024-02-19 13:56:05 / Updated at: 15:42:51" itemprop="dateCreated datePublished" datetime="2024-02-19T13:56:05+08:00">2024-02-19</time>
            

            
              

              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>以chrome浏览器来说明，在地址栏输入chrome://webrtc-internals/即可打开调试工具</p>
</blockquote>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125103700660.png" alt="image-20220125103700660"></p>
<h2 id="Create-Dump（保存日志）"><a href="#Create-Dump（保存日志）" class="headerlink" title="Create Dump（保存日志）"></a>Create Dump（保存日志）</h2><p>可以将该页面的log数据进行本地化存储，方便分享和留档。</p>
<h2 id="Read-Stats-From（读取状态日志）"><a href="#Read-Stats-From（读取状态日志）" class="headerlink" title="Read Stats From（读取状态日志）"></a>Read Stats From（读取状态日志）</h2><p>WebRTC读取状态日志分为2中：</p>
<ul>
<li>Standardized：符合W3C的新标准，基于promise模式</li>
<li>Legacy Non-Standard：废弃的google定义的旧标准，基于callback模式</li>
</ul>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/截屏2022-01-25 上午10.49.46.png" alt="截屏2022-01-25 上午10.49.46"></p>
<h2 id="GetUserMedia-Requests（GetUserMedia调用日志）"><a href="#GetUserMedia-Requests（GetUserMedia调用日志）" class="headerlink" title="GetUserMedia Requests（GetUserMedia调用日志）"></a>GetUserMedia Requests（GetUserMedia调用日志）</h2><p>getUserMedia是浏览器获取用户本地摄像头和麦克风的接口，具体使用方法：<code>navigator.mediaDevices.getUserMedia</code>。GetUserMedia Requests的Tab中可以看到近期调用这个api的记录，每调用一次就会多一条。</p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125110844187.png" alt="image-20220125110844187"></p>
<h2 id="RTCPeerConnection（监控信息）"><a href="#RTCPeerConnection（监控信息）" class="headerlink" title="RTCPeerConnection（监控信息）"></a>RTCPeerConnection（监控信息）</h2><p>除了GetUserMedia Requests，其他Tab每一个都对应一个PeerConnection对象。</p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125111712303.png" alt="image-20220125111712303"></p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125111731747.png" alt="image-20220125111731747"></p>
<h4 id="构造PeerConnection实例的参数"><a href="#构造PeerConnection实例的参数" class="headerlink" title="构造PeerConnection实例的参数"></a>构造PeerConnection实例的参数</h4><p>最上面圈起来的那块是构造PeerConnection的参数配置</p>
<h4 id="PeerConnection事件"><a href="#PeerConnection事件" class="headerlink" title="PeerConnection事件"></a>PeerConnection事件</h4><ul>
<li>addTrack（建立音频轨道）</li>
</ul>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125113409121.png" alt="image-20220125113409121"></p>
<ul>
<li><p>createOffer（生成offer）</p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125113538013.png" alt="image-20220125113538013"></p>
</li>
<li><p>setLocalDescription（设置local sdp）</p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125143155721.png" alt="image-20220125143155721"></p>
</li>
<li><p>iceconnectionstatechange（ICE的连接状态发生变化）</p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125165024993.png" alt="image-20220125165024993"></p>
</li>
<li><p>connectionstatechange（PeerConnection的连接状态发生变化）</p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125165043733.png" alt="image-20220125165043733"></p>
</li>
<li><p>icecandidate（收集本地的candidate）</p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125164803760.png" alt="image-20220125164803760"></p>
</li>
<li><p>setRemoteDescription（设置remote sdp）</p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125162500220.png" alt="image-20220125162500220"></p>
</li>
<li><p>signalingstatechange（信令状态的回调）</p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125164612639.png" alt="image-20220125164612639"></p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125164622944.png" alt="image-20220125164622944"></p>
</li>
<li><p>addIceCandidate（将对端的candidate添加到PeerConnection中）</p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125163342091.png" alt="image-20220125163342091"></p>
</li>
<li><p>如果出现error也可以在Event这块看到：</p>
</li>
</ul>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125162859189.png" alt="image-20220125162859189"></p>
<h2 id="流数据（数据格式-amp-图表格式）"><a href="#流数据（数据格式-amp-图表格式）" class="headerlink" title="流数据（数据格式&amp;图表格式）"></a>流数据（数据格式&amp;图表格式）</h2><p>流数据主要关注四行就够了（上行数据、下行数据）</p>
<ul>
<li><p>inbound-rtp：下行数据，也就是从远端接收到的数据，可以分为音频和视频</p>
</li>
<li><p>outbound-rtp：上行数据，代表发送给远端的数据，可以分为音频和视频</p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125170026281.png" alt="image-20220125170026281"></p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125170242142.png" alt="image-20220125170242142"></p>
<h4 id="展开后可以看到"><a href="#展开后可以看到" class="headerlink" title="展开后可以看到"></a>展开后可以看到</h4><ul>
<li><h5 id="下行数据（接收到的）"><a href="#下行数据（接收到的）" class="headerlink" title="下行数据（接收到的）"></a>下行数据（接收到的）</h5><p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125171344267.png" alt="image-20220125171344267"></p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125172427718.png" alt="image-20220125172427718"></p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125171812419.png" alt="image-20220125171812419"></p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125172507453.png" alt="image-20220125172507453"></p>
</li>
<li><h5 id="上行数据（发送的）"><a href="#上行数据（发送的）" class="headerlink" title="上行数据（发送的）"></a>上行数据（发送的）</h5><p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125172252449.png" alt="image-20220125172252449"></p>
<p><img src="/2024/02/19/WebRtc-Internals%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/image-20220125172315264.png" alt="image-20220125172315264"></p>
</li>
</ul>
</li>
</ul>
<h2 id="问题排查"><a href="#问题排查" class="headerlink" title="问题排查"></a>问题排查</h2><ul>
<li><h5 id="拉流画面黑屏"><a href="#拉流画面黑屏" class="headerlink" title="拉流画面黑屏"></a>拉流画面黑屏</h5><p>需要查看video的inbound-rtp的下行数据包是否有接收到，或者帧解码是否成功。</p>
</li>
<li><h5 id="拉流没有声音"><a href="#拉流没有声音" class="headerlink" title="拉流没有声音"></a>拉流没有声音</h5><p>需要查看audio的inbound-rtp接收到的数据是否存在问题</p>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/11/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pjy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pjy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/11/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/" itemprop="url">
                  观察者模式
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Post created: 2020-08-11 09:58:16" itemprop="dateCreated datePublished" datetime="2020-08-11T09:58:16+08:00">2020-08-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Updated at: 2024-02-19 15:42:51" itemprop="dateModified" datetime="2024-02-19T15:42:51+08:00">2024-02-19</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a><strong>观察者模式</strong></h3><ul>
<li><strong>观察者（订阅者）</strong> – Watcher<ul>
<li>​    update()：当事件发生时，具体要做的事情</li>
</ul>
</li>
<li><strong>目标（发布者）</strong>–Dep<ul>
<li>subs数组：存储所有的观察者</li>
<li>addSub()：添加观察者</li>
<li>notify()：当事件发生，调用所有观察者的update()方法</li>
</ul>
</li>
<li><strong>没有事件中心</strong></li>
</ul>
<pre class="line-numbers language-js"><code class="language-js"><span class="token comment" spellcheck="true">// 发布者</span>
<span class="token keyword">class</span> <span class="token class-name">Dep</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>subs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">// 添加观察者</span>
    <span class="token function">addSub</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sub <span class="token operator">&amp;&amp;</span> sub<span class="token punctuation">.</span>update<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>sub <span class="token operator">=</span><span class="token operator">></span> sub<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">// 观察者</span>
<span class="token keyword">class</span> <span class="token class-name">Watcher</span> <span class="token punctuation">{</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'update'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/11/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pjy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pjy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/11/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F/" itemprop="url">
                  发布订阅模式
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Post created: 2020-08-11 09:58:03" itemprop="dateCreated datePublished" datetime="2020-08-11T09:58:03+08:00">2020-08-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Updated at: 2024-02-19 15:42:51" itemprop="dateModified" datetime="2024-02-19T15:42:51+08:00">2024-02-19</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="发布订阅模式"><a href="#发布订阅模式" class="headerlink" title="发布订阅模式"></a><strong>发布订阅模式</strong></h3><ul>
<li><p><strong>订阅者</strong></p>
</li>
<li><p><strong>发布者</strong></p>
</li>
<li><p><strong>信号中心</strong></p>
<blockquote>
<p>我们假定，存在一个“信号中心”，某个任务执行完成，就向信号中心“发布”(publish)一个信号，其他任务可以向信号中心“订阅”(subscribe)这个信号，从而知道什么时候自己可以开始执行。</p>
</blockquote>
</li>
</ul>
<pre class="line-numbers language-js"><code class="language-js"><span class="token comment" spellcheck="true">// 发布订阅</span>
<span class="token keyword">class</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>subs <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">// 订阅事件</span>
    <span class="token function">$on</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">[</span>eventType<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">[</span>eventType<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">[</span>eventType<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">// 发布</span>
    <span class="token function">$emit</span><span class="token punctuation">(</span>eventType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">[</span>eventType<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">[</span>eventType<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>fn <span class="token operator">=</span><span class="token operator">></span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/09/%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pjy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pjy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/09/%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96/" itemprop="url">
                  函数柯里化
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Post created: 2020-08-09 10:35:08" itemprop="dateCreated datePublished" datetime="2020-08-09T10:35:08+08:00">2020-08-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Updated at: 2024-02-19 15:42:51" itemprop="dateModified" datetime="2024-02-19T15:42:51+08:00">2024-02-19</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="函数柯里化"><a href="#函数柯里化" class="headerlink" title="函数柯里化"></a><strong>函数柯里化</strong></h3><pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">sub_curry</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> args <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> allArgs <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> allArgs<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> len <span class="token operator">=</span> fn<span class="token punctuation">.</span>length <span class="token operator">||</span> length
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> args <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> combined <span class="token operator">=</span> <span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token function">curry</span><span class="token punctuation">(</span>sub_curry<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> combined<span class="token punctuation">)</span><span class="token punctuation">,</span> len <span class="token operator">-</span> args<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/07/vue%E6%8F%92%E6%A7%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pjy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pjy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/07/vue%E6%8F%92%E6%A7%BD/" itemprop="url">
                  vue插槽
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Post created: 2020-08-07 14:08:33" itemprop="dateCreated datePublished" datetime="2020-08-07T14:08:33+08:00">2020-08-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Updated at: 2024-02-19 15:42:51" itemprop="dateModified" datetime="2024-02-19T15:42:51+08:00">2024-02-19</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="vue插槽"><a href="#vue插槽" class="headerlink" title="vue插槽"></a><strong>vue插槽</strong></h3><blockquote>
</blockquote>
<pre class="line-numbers language-html"><code class="language-html"><span class="token comment" spellcheck="true">&lt;!-- 父组件 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SlotDemo</span> <span class="token attr-name">:slotList</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>listData<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span>  <span class="token attr-name"><span class="token namespace">v-slot:</span>default</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{myData: list}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token comment" spellcheck="true">&lt;!-- &lt;template  v-slot:list="{myData: list}"> --></span>
<span class="token comment" spellcheck="true">&lt;!-- 属于解构赋值{myData: list} v-slot:list="这里代表的是子组件对应的:myData="scope"等数据" --></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>
        {{list.name}}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list.age <span class="token punctuation">></span> 21<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>:{{ list.age }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SlotDemo</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript">
  <span class="token comment" spellcheck="true">// ***</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span><span class="token punctuation">{</span>
    listData<span class="token punctuation">:</span> Array<span class="token operator">&lt;</span>object<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                name<span class="token punctuation">:</span> <span class="token string">'jack'</span><span class="token punctuation">,</span>
                age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
                desc<span class="token punctuation">:</span> <span class="token string">'haha'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                name<span class="token punctuation">:</span> <span class="token string">'lisa'</span><span class="token punctuation">,</span>
                age<span class="token punctuation">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
                desc<span class="token punctuation">:</span> <span class="token string">'xixi'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                name<span class="token punctuation">:</span> <span class="token string">'tom'</span><span class="token punctuation">,</span>
                age<span class="token punctuation">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
                desc<span class="token punctuation">:</span> <span class="token string">'heihei'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                name<span class="token punctuation">:</span> <span class="token string">'peter'</span><span class="token punctuation">,</span>
                age<span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
                desc<span class="token punctuation">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
     <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token comment" spellcheck="true">&lt;!-- 子组件 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scope in slotList<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!-- 默认name="default" --></span>
    <span class="token comment" spellcheck="true">&lt;!-- 与父组件的v-slot:name对应 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:myData</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scope<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ts<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript">
  <span class="token comment" spellcheck="true">// ***</span>
   <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">slotDemo</span> <span class="token keyword">extends</span> <span class="token class-name">Vue</span><span class="token punctuation">{</span>
        @<span class="token function">Prop</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">)</span> slotList<span class="token operator">!</span><span class="token punctuation">:</span> any 
   <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/05/css%E5%B1%82%E5%8F%A0%E4%B8%8A%E4%B8%8B%E6%96%87%E3%80%81%E5%B1%82%E5%8F%A0%E7%AD%89%E7%BA%A7%E3%80%81%E5%B1%82%E5%8F%A0%E9%A1%BA%E5%BA%8F%E4%BB%A5%E5%8F%8Az-index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pjy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pjy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/05/css%E5%B1%82%E5%8F%A0%E4%B8%8A%E4%B8%8B%E6%96%87%E3%80%81%E5%B1%82%E5%8F%A0%E7%AD%89%E7%BA%A7%E3%80%81%E5%B1%82%E5%8F%A0%E9%A1%BA%E5%BA%8F%E4%BB%A5%E5%8F%8Az-index/" itemprop="url">
                  css层叠上下文、层叠等级、层叠顺序以及z-index
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Post created: 2020-08-05 16:11:04" itemprop="dateCreated datePublished" datetime="2020-08-05T16:11:04+08:00">2020-08-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Updated at: 2024-02-19 15:42:51" itemprop="dateModified" datetime="2024-02-19T15:42:51+08:00">2024-02-19</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="css层叠上下文、层叠等级、层叠顺序以及z-index"><a href="#css层叠上下文、层叠等级、层叠顺序以及z-index" class="headerlink" title="css层叠上下文、层叠等级、层叠顺序以及z-index"></a><strong>css层叠上下文、层叠等级、层叠顺序以及z-index</strong></h5><ul>
<li><p><strong>层叠上下文</strong></p>
<blockquote>
<p>层叠上下文是HTML中的一个三维概念。分为x轴、y轴、z轴，层叠上下文就是对这些HTML元素的三维构想。</p>
<p>满足一下任意一个条件及可形成层叠上下文：</p>
<ul>
<li>文档的根元素<code>&lt;html&gt;</code></li>
<li>position值不为static（z-index值不为auto的元素）</li>
<li>flex容器的子元素（z-index值不为auto的元素）</li>
<li>grid容器的子元素（z-index值不为auto的元素）</li>
<li>opacity值小于1的元素</li>
<li>mix-blend-mode值不为normal的元素</li>
<li>css3属性（值不为none）<ul>
<li>transform</li>
<li>filter</li>
<li>perspective</li>
<li>clip-path</li>
<li>mask/mask-image/mask-border</li>
</ul>
</li>
<li>isolation属性值为isolate的元素</li>
<li>-webkit-overflow-scrolling属性值为touch的元素</li>
<li>will-change</li>
<li>contain值为layout、paint或包含它们其中之一的合成值</li>
</ul>
</blockquote>
</li>
<li><p><strong>层叠等级</strong></p>
<blockquote>
<p>层叠等级：</p>
<ul>
<li>在同一个层叠上下文中，它描述定义的是该层叠上下文中的层叠上下文元素在Z轴上的上下顺序。</li>
<li>在其他普通元素中，它描述的是这些普通元素在Z轴上的上下顺序。</li>
<li>层叠等级的比较只有在当前层叠上下文中才有意义。不同层叠上下文的层叠等级比较是没有意义的。</li>
</ul>
</blockquote>
</li>
<li><p><strong>层叠顺序</strong></p>
<blockquote>
<p>层叠顺序：表示元素发生层叠时按照特定的元素规则在Z轴上垂直显示。（层叠上下文和层叠等级是一种概念，而层叠顺序是一种规则）</p>
<p><img src="/2020/08/05/css%E5%B1%82%E5%8F%A0%E4%B8%8A%E4%B8%8B%E6%96%87%E3%80%81%E5%B1%82%E5%8F%A0%E7%AD%89%E7%BA%A7%E3%80%81%E5%B1%82%E5%8F%A0%E9%A1%BA%E5%BA%8F%E4%BB%A5%E5%8F%8Az-index/image-20200805170444733.png" alt="image-20200805170444733"></p>
</blockquote>
</li>
<li><p><strong>比较流程</strong></p>
<blockquote>
<ol>
<li><p>首先看比较的两个元素是否处在一个层叠上下文中</p>
<ul>
<li><p>如果是，则谁的层叠等级大(层叠等级通过层叠顺序图来判断)，则谁在上边。</p>
</li>
<li><p>如果不是，则比较它们所处的层叠上下文的层叠等级</p>
</li>
</ul>
</li>
<li><p>当两个元素层叠等级相同、层叠顺序相同时，在dom结构中，后面的元素的层叠等级在前面的元素之上。</p>
</li>
</ol>
</blockquote>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/05/word-break%E3%80%81overflow-wrap%E3%80%81white-space/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="pjy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pjy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/05/word-break%E3%80%81overflow-wrap%E3%80%81white-space/" itemprop="url">
                  word-break、overflow-wrap、white-space
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Post created: 2020-08-05 14:46:17" itemprop="dateCreated datePublished" datetime="2020-08-05T14:46:17+08:00">2020-08-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Updated at: 2024-02-19 15:42:51" itemprop="dateModified" datetime="2024-02-19T15:42:51+08:00">2024-02-19</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="word-break、overflow-wrap、white-space"><a href="#word-break、overflow-wrap、white-space" class="headerlink" title="word-break、overflow-wrap、white-space"></a><strong>word-break、overflow-wrap、white-space</strong></h5><blockquote>
</blockquote>
<ul>
<li><p><strong>white-space</strong></p>
<blockquote>
<p>属性设置如何处理元素内的空白</p>
<p>值：</p>
<p>|     值     |                             描述                             |<br>| :——–: | :———————————————————-: |<br>|  <code>normal</code>  |              默认值。代码中的空白会被浏览器忽略              |<br>|   <code>pre</code>    | 空白会被浏览器保留并渲染。自动换行（文本超过一行后自动换行）不会保留。 |<br>|  <code>nowrap</code>  |   文本不会换行，会在同一行上继续，直到遇到<code>&lt;br&gt;</code>标签为止。   |<br>| <code>pre-line</code> |                 合并空白符序列，但保留换行。                 |<br>| <code>pre-wrap</code> |              保留空格和换行符，且可以自动换行。              |<br>| <code>ingerit</code>  |                    规定从父元素继承该属性                    |<br>|            |                                                              |</p>
</blockquote>
</li>
<li><p><strong>word-break</strong></p>
<blockquote>
<p>属性处理单词如何进行换行</p>
<p>值：</p>
<p>|     值      |             描述             |<br>| :———: | :————————–: |<br>|  <code>normal</code>   |   使用浏览器默认的换行规则   |<br>| <code>break-all</code> | 所有单词碰到边界一律拆分换行 |<br>| <code>keep-all</code>  | 只能在半角空格或连字符处换行 |<br>|             |                              |</p>
</blockquote>
</li>
<li><p><strong>overflow-wrap</strong></p>
<blockquote>
<p>属性用来处理某个太长的单词超出其包裹盒时的换行行为</p>
<p>值：</p>
<p>| 值       | 描述                                       |<br>| :——: | :—————————————-: |<br>| <code>normal</code> | 浏览器默认行为。表示在正常的单词结束处换行 |<br>| <code>break-word</code> | 如果行内没有多余的地方容纳该单词到结尾，则那些正常的不能被分割的单词会被强制分割换行（只有长单词遇到边界才会换行） |<br>|          |                                            |</p>
</blockquote>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot; aria-label&#x3D;&quot;Next page&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          
        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">pjy</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/%20%7C%7C%20archive">
                
                    <span class="site-state-item-count">74</span>
                    <span class="site-state-item-name">Artikel</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">Kategorien</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">25</span>
                    <span class="site-state-item-name">Tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">pjy</span>

  

  
</div>




  <div class="powered-by">Erstellt mit  <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v4.2.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Muse</a> v6.4.2</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.2"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.2"></script>



  



  











  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
