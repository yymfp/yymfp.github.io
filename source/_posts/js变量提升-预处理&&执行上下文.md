---
title: js变量提升---预处理&&执行上下文
date: 2019-05-03 12:09:04
tags: js
categories: 前端
---

### js变量提升---预处理

js引擎在代码正式执行前会做一个预处理工作：

1. 收集变量

2. 收集函数

   依据：

   * var 将var后边的变量定义但不赋值 `var username = undefined`
   * function(){} 提前定义该函数

   ​	

### 执行上下文

- 理解：代码执行的环境

- 时机：代码正式执行之前会进入到执行环境

- 工作：

  1. 创建变量对象：

     - 变量
     - 函数及函数的参数
     - 全局：window
     - 局部：抽象的但是确实存在

  2. 确认this的指向

     - 全局：this ---> window
     - 局部： this ---> 调用其的对象

  3. 创建作用域链

     父级作用域链+当前的变量对象

  4. 扩展：

     ```js
     ECObj = {
         //变量对象： {变量，函数，函数的形参},
         //scopeChain：父级作用域链+当前的变量对象,
         //this:{window || 调用其的对象}
     }
     ```

     